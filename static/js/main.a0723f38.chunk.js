(this["webpackJsonpsls-course-frontend"]=this["webpackJsonpsls-course-frontend"]||[]).push([[0],{100:function(e,t,n){e.exports=n(137)},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(15),o=n(11),c=n.n(o),l=n(8),u=n.n(l),s=n(14),d=n(16),p=n(2),m=n(85),f=function(){return window.history.replaceState({},document.title,window.location.pathname)},b=r.a.createContext(),h=function(){return Object(a.useContext)(b)},g=function(e){var t=e.authStore,n=e.children,i=e.onRedirectCallback,o=void 0===i?f:i,c=Object(p.a)(e,["authStore","children","onRedirectCallback"]),l=Object(a.useState)(),h=Object(d.a)(l,2),g=h[0],O=h[1],y=Object(a.useState)(),v=Object(d.a)(y,2),E=v[0],j=v[1],w=Object(a.useState)(),k=Object(d.a)(w,2),x=k[0],C=k[1],S=Object(a.useState)(!0),A=Object(d.a)(S,2),B=A[0],N=A[1],I=Object(a.useState)(!1),T=Object(d.a)(I,2),W=T[0],R=T[1];Object(a.useEffect)((function(){(function(){var e=Object(s.a)(u.a.mark((function e(){var n,a,r,i,l,s,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(c);case 2:if(n=e.sent,C(n),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,n.handleRedirectCallback();case 7:a=e.sent,r=a.appState,o(r);case 10:return e.next=12,n.isAuthenticated();case 12:if(i=e.sent,O(i),!i){e.next=25;break}return e.next=17,n.getUser();case 17:return l=e.sent,e.next=20,n.getIdTokenClaims();case 20:s=e.sent,d=s.__raw,t.setClaims(l),t.setToken(d),j(l);case 25:N(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var U=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},R(!0),e.prev=2,e.next=5,x.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,R(!1),e.finish(10);case 13:return e.next=15,x.getUser();case 15:n=e.sent,j(n),O(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,x.handleRedirectCallback();case 3:return e.next=5,x.getUser();case 5:t=e.sent,N(!1),O(!0),j(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{isAuthenticated:g,user:E,loading:B,popupOpen:W,loginWithPopup:U,handleRedirectCallback:z,getIdTokenClaims:function(){return x.getIdTokenClaims.apply(x,arguments)},loginWithRedirect:function(){return x.loginWithRedirect.apply(x,arguments)},getTokenSilently:function(){return x.getTokenSilently.apply(x,arguments)},getTokenWithPopup:function(){return x.getTokenWithPopup.apply(x,arguments)},logout:function(){return x.logout.apply(x,arguments)}}},n)},O=n(172),y=n(175),v=Object(O.a)({navbar:{background:"linear-gradient(90deg, rgba(190,52,32,1) 0%, rgba(231,75,77,1) 48%, rgba(231,148,74,1) 100%)",padding:14,marginBottom:24,display:"flex",width:"100%",boxSizing:"border-box"},header:{flexBasis:"50%",display:"flex"},loginLogoutContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center",flexBasis:"50%"},button:{color:"white"}}),E=Object(i.b)(["authStore"])((function(e){var t=e.authStore,n=h(),a=n.loginWithRedirect,i=n.logout,o=t.token,c=v();return r.a.createElement("div",{className:c.navbar},r.a.createElement("div",{className:c.header},r.a.createElement("h1",{style:{fontSize:14,color:"white"}},"THE AUCTION HOUSE")),r.a.createElement("div",{className:c.loginLogoutContainer},!o&&r.a.createElement(y.a,{className:c.button,onClick:function(){return a({})}},"Sign in"),o&&r.a.createElement(y.a,{className:c.button,onClick:function(){return i({})}},"Sign out")))})),j=n(191),w=n(31),k=Object(w.a)(),x=function(e){var t=e.component,n=e.path,i=Object(p.a)(e,["component","path"]),o=h(),c=o.loading,l=o.isAuthenticated,d=o.loginWithRedirect;Object(a.useEffect)((function(){c||l||function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({appState:{targetUrl:window.location.pathname}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[c,l,d,n]);return r.a.createElement(j.a,Object.assign({path:n,render:function(e){return!0===l?r.a.createElement(t,e):null}},i))},C=n(63),S=n(177),A=n(178),B=n(182),N=n(181),I=n(180),T=n(88),W=n(179),R=n(192),U=n(64);function z(){var e=Object(C.a)(["\n  font-size: 14px;\n"]);return z=function(){return e},e}function P(){var e=Object(C.a)(["\n  font-size: 12px;\n  font-weight: bold;\n  color: #919191;\n"]);return P=function(){return e},e}var D=Object(O.a)({root:{width:"100%"},media:{height:280},bidButton:{width:"70%",background:"linear-gradient(90deg, rgba(190,52,32,1) 0%, rgba(231,75,77,1) 48%, rgba(231,148,74,1) 100%)",borderWidth:0,color:"white"},cardActions:{width:"100%",display:"flex",justifyContent:"center",padding:12},detailsContainer:{display:"flex",padding:0},details:{display:"flex",flexBasis:"50%",justifyContent:"center",alignItems:"center",paddingTop:18,paddingBottom:10,textAlign:"center"}}),H=U.a.p(P()),L=U.a.span(z()),_=function(e){var t=e.auction,n=e.onBid,a=e.bidState,i=D(),o=t.highestBid.amount,c=t.pictureUrl?t.pictureUrl:"placeholder.png";return r.a.createElement(S.a,{className:i.root},r.a.createElement(A.a,null,r.a.createElement(W.a,{avatar:r.a.createElement(R.a,{"aria-label":"recipe",className:i.avatar},t.seller[0].toUpperCase()),title:t.title}),r.a.createElement(I.a,{className:i.media,image:c,title:"Contemplative Reptile"}),r.a.createElement(N.a,{className:i.detailsContainer},r.a.createElement("div",{className:i.details},r.a.createElement("div",null,r.a.createElement(L,null,0===o?"No bids":"$".concat(o)),r.a.createElement(H,null,"HIGHEST BID"))),r.a.createElement("div",{className:i.details},r.a.createElement("div",null,r.a.createElement(T.a,{date:t.endingAt,renderer:function(e){var t=e.hours,n=e.minutes,a=e.seconds;return r.a.createElement(L,null,t," hours ",n," mins ",a," secs")}}),r.a.createElement(H,null,"TIME REMAINING"))))),r.a.createElement(B.a,null,r.a.createElement("div",{className:i.cardActions},("OWN_AUCTION"===a||"HIGHEST_BIDDER"===a)&&r.a.createElement(y.a,{disabled:!0,onClick:function(){return n()}},"OWN_AUCTION"===a?"This is your auction":"You are the highest bidder"),"CAN_BID"===a&&r.a.createElement(y.a,{variant:"outlined",className:i.bidButton,onClick:function(){return n()}},"Bid now!"))))},F=n(190),G=n(183),V=n(193),$=n(194),q=n(184),J=n(185),M=Object(O.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center",outline:0},paper:{backgroundColor:e.palette.background.paper,padding:e.spacing(2,4,3),outline:0,borderRadius:10}}})),Q=Object(i.b)(["auctionStore"])(Object(i.c)((function(e){var t=e.auctionStore,n=(e.onCancel,M()),a=t.biddingOn;return a?r.a.createElement(F.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:n.modal,open:!!a,onClose:function(){return t.setBiddingOn(null)},closeAfterTransition:!0},r.a.createElement(G.a,{in:!!a},r.a.createElement("div",{className:n.paper},r.a.createElement("h2",null,'Bid on "',a.title,'"'),r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(V.a,{fullWidth:!0,className:n.margin},r.a.createElement($.a,{htmlFor:"standard-adornment-amount"},"Bid Amount"),r.a.createElement(q.a,{id:"standard-adornment-amount",value:t.bidAmount,onChange:function(e){return t.setBidAmount(e.target.value)},type:"number",startAdornment:r.a.createElement(J.a,{position:"start"},"$")})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(y.a,{style:{float:"right"},onClick:function(){return t.placeBid()}},"Place Bid")))))):null}))),Y=n(186),Z=n(92),K=n.n(Z),X=Object(O.a)({auctionsContainer:{display:"flex",flexWrap:"wrap",maxWidth:1e3,margin:"auto","@media (max-width: 900px)":{alignItems:"center",justifyContent:"center"}},auctionCard:{flexBasis:472,flexShrink:0,padding:14},fabContainer:{position:"fixed",bottom:20,right:20},createAuctionButton:{background:"linear-gradient(90deg, rgba(190,52,32,1) 0%, rgba(231,75,77,1) 48%, rgba(231,148,74,1) 100%)"}}),ee=Object(i.b)("auctionStore","authStore","routerHistory")(Object(i.c)((function(e){var t=e.auctionStore,n=e.authStore,i=e.routerHistory,o=X();Object(a.useEffect)((function(){Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAuctions();case 2:setInterval((function(){"/auctions"!==i.location.pathname&&"/"!==i.location.pathname||t.fetchAuctions()}),5e6);case 3:case"end":return e.stop()}}),e)})))()}),[t,i]);return r.a.createElement("div",{className:o.auctionsContainer},r.a.createElement(Q,null),function(){var e=t.auctions;return e.length?e.map((function(e){var a="CAN_BID";return e.seller===n.email&&(a="OWN_AUCTION"),e.highestBid.bidder===n.email&&(a="HIGHEST_BIDDER"),r.a.createElement("div",{key:e.id,className:o.auctionCard},r.a.createElement(_,{auction:e,bidState:a,onBid:function(){return t.setBiddingOn(e)}}))})):r.a.createElement("div",{style:{textAlign:"center",width:"100%"}},r.a.createElement("h4",null,"No auctions available. Create one?"))}(),r.a.createElement("div",{className:o.fabContainer},r.a.createElement(Y.a,{color:"primary","aria-label":"add",className:o.createAuctionButton,onClick:function(){return i.push("/create")}},r.a.createElement(K.a,null))))}))),te=n(187),ne=n(189),ae=n(66),re=n(93),ie=n.n(re),oe=Object(O.a)({container:{width:300,height:100,border:"2px dashed #a1a1a1",borderRadius:5,display:"flex",justifyContent:"center",alignItems:"center",cursor:"copy"},preview:{width:300,borderRadius:5}}),ce=function(e){var t,n=e.onPictureSelected,i=Object(a.useState)(null),o=Object(d.a)(i,2),c=o[0],l=o[1],p=oe(),m=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],(r=new FileReader).readAsDataURL(a),r.onload=function(){l(r.result),n(r.result)};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("input",{style:{display:"none"},ref:function(e){return t=e},type:"file",onChange:m}),!c&&r.a.createElement(ae.a,{onClick:function(){return t.click()}},r.a.createElement("div",{className:p.container},r.a.createElement(ie.a,{color:"disabled"}))),c&&r.a.createElement("img",{className:p.preview,src:c,alt:"Auction"}))},le=Object(O.a)((function(e){return{form:{maxWidth:400},pictureUpload:{marginTop:20,marginBottom:20}}})),ue=Object(i.b)("auctionStore","authStore","routerHistory")(Object(i.c)((function(e){var t=e.auctionStore,n=e.routerHistory,i=Object(a.useState)(""),o=Object(d.a)(i,2),c=o[0],l=o[1],p=Object(a.useState)(null),m=Object(d.a)(p,2),f=m[0],b=m[1],h=le(),g=function(){var e=Object(s.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createAuction(a,f);case 2:n.push("/auctions");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(te.a,{width:200,fixed:!0},r.a.createElement("h1",null,"Create an Auction"),r.a.createElement("form",{className:h.form,noValidate:!0,autoComplete:"off"},r.a.createElement(V.a,{fullWidth:!0},r.a.createElement(ne.a,{label:"Auction Title",id:"standard-adornment-amount",value:c,onChange:function(e){return l(e.target.value)},placeholder:"Example: Lemonade from the '60s",type:"string",variant:"outlined"})),r.a.createElement("div",{className:h.pictureUpload},r.a.createElement(ce,{onPictureSelected:function(e){return b(e)}})),r.a.createElement("div",null,r.a.createElement(y.a,{onClick:function(){return g(c)},disabled:!c.length||!f},"Create auction"))))}))),se=n(188),de=Object(O.a)((function(e){e.props;return{spinnerContainer:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(0, 0, 0, 0.2)",position:"fixed",zIndex:999}}})),pe=function(e){var t=e.display,n=de(),a=t?"flex":"none";return console.log("dValue",a,"/ display",t),r.a.createElement("div",{className:n.spinnerContainer,style:{display:a}},r.a.createElement(se.a,{color:"secondary"}))},me=Object(i.b)("overlayStore")(Object(i.c)((function(e){var t=e.overlayStore;return r.a.createElement("div",{className:"App"},r.a.createElement(pe,{display:t.displaySpinner}),r.a.createElement(j.b,{history:k},r.a.createElement("header",null,r.a.createElement(E,null)),r.a.createElement(j.c,null,r.a.createElement(x,{path:"/",exact:!0,component:ee}),r.a.createElement(x,{path:"/auctions",component:ee}),r.a.createElement(x,{path:"/create",component:ue}))))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe,be,he,ge,Oe,ye,ve,Ee,je,we,ke=n(29),xe=n(34),Ce=n(22),Se=n(12),Ae=(n(60),n(6)),Be=n(94),Ne=n.n(Be),Ie=new(fe=function(){function e(){Object(xe.a)(this,e),Object(ke.a)(this,"token",be,this),Object(ke.a)(this,"claims",he,this),Object(ke.a)(this,"email",ge,this)}return Object(Ce.a)(e,[{key:"setToken",value:function(e){this.token=e,console.log("Token set",e)}},{key:"setClaims",value:function(e){this.claims=e,this.email=e.email}}]),e}(),be=Object(Se.a)(fe.prototype,"token",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=Object(Se.a)(fe.prototype,"claims",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=Object(Se.a)(fe.prototype,"email",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(Se.a)(fe.prototype,"setToken",[Ae.f],Object.getOwnPropertyDescriptor(fe.prototype,"setToken"),fe.prototype),Object(Se.a)(fe.prototype,"setClaims",[Ae.f],Object.getOwnPropertyDescriptor(fe.prototype,"setClaims"),fe.prototype),fe),Te=new(Oe=function(){function e(){Object(xe.a)(this,e),Object(ke.a)(this,"displaySpinner",ye,this)}return Object(Ce.a)(e,[{key:"setLoadingSpinner",value:function(e){this.displaySpinner=e}}]),e}(),ye=Object(Se.a)(Oe.prototype,"displaySpinner",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(Se.a)(Oe.prototype,"setLoadingSpinner",[Ae.f],Object.getOwnPropertyDescriptor(Oe.prototype,"setLoadingSpinner"),Oe.prototype),Oe),We=Ne.a.create({baseURL:"https://akh09t3qal.execute-api.us-east-2.amazonaws.com/dev/"}),Re=new(ve=function(){function e(){Object(xe.a)(this,e),Object(ke.a)(this,"auctions",Ee,this),Object(ke.a)(this,"biddingOn",je,this),Object(ke.a)(this,"bidAmount",we,this)}return Object(Ce.a)(e,[{key:"fetchAuctions",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We.get("/auctions?status=OPEN",{headers:{Authorization:Ie.token}});case 3:t=e.sent,this.auctions=t.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Could not fetch auctions! Check console for more details."),console.error(e.t0);case 11:this.biddingOn&&this.auctions.forEach((function(e){e.id===n.biddingOn.id&&(n.bidAmount=e.highestBid.amount+1)}));case 12:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setBiddingOn",value:function(e){this.biddingOn=e,this.bidAmount=e?e.highestBid.amount+1:0}},{key:"setBidAmount",value:function(e){this.bidAmount=e}},{key:"placeBid",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.biddingOn.id,n=this.bidAmount,Te.setLoadingSpinner(!0),e.prev=3,e.next=6,We.patch("/auction/".concat(t,"/bid"),{amount:n},{headers:{Authorization:Ie.token}});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),alert("Could not place bid! Check console for more details."),console.error(e.t0);case 12:this.fetchAuctions(),this.biddingOn=null,this.bidAmount=0,Te.setLoadingSpinner(!1);case 16:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"createAuction",value:function(){var e=Object(s.a)(u.a.mark((function e(t,n){var a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Te.setLoadingSpinner(!0),e.prev=1,e.next=4,We.post("/auction",{title:t},{headers:{Authorization:Ie.token}});case 4:return r=e.sent,i=r.data,a=i.id,e.next=9,We.patch("/auction/".concat(a,"/picture"),n,{headers:{Authorization:Ie.token}});case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert("Could not create auction! Check console for more details."),console.error(e.t0);case 15:Te.setLoadingSpinner(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ee=Object(Se.a)(ve.prototype,"auctions",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=Object(Se.a)(ve.prototype,"biddingOn",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=Object(Se.a)(ve.prototype,"bidAmount",[Ae.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(Se.a)(ve.prototype,"fetchAuctions",[Ae.f],Object.getOwnPropertyDescriptor(ve.prototype,"fetchAuctions"),ve.prototype),Object(Se.a)(ve.prototype,"setBiddingOn",[Ae.f],Object.getOwnPropertyDescriptor(ve.prototype,"setBiddingOn"),ve.prototype),Object(Se.a)(ve.prototype,"setBidAmount",[Ae.f],Object.getOwnPropertyDescriptor(ve.prototype,"setBidAmount"),ve.prototype),Object(Se.a)(ve.prototype,"placeBid",[Ae.f],Object.getOwnPropertyDescriptor(ve.prototype,"placeBid"),ve.prototype),ve);n(135),n(136);c.a.render(r.a.createElement(i.a,{auctionStore:Re,authStore:Ie,routerHistory:k,overlayStore:Te},r.a.createElement(g,{authStore:Ie,domain:"johnny-sls-test-dev.us.auth0.com",client_id:"xrx4u5aUqs2Ut4uCNV0WIZQsrVGFFWoE",redirect_uri:window.location.origin,onRedirectCallback:function(e){k.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.a0723f38.chunk.js.map